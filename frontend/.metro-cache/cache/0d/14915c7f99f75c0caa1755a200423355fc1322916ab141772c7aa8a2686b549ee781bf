{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var TOKEN = /([!#\\$%&'\\*\\+\\-\\.\\^_`\\|~0-9A-Za-z]+)/,\n    NOTOKEN = /([^!#\\$%&'\\*\\+\\-\\.\\^_`\\|~0-9A-Za-z])/g,\n    QUOTED = /\"((?:\\\\[\\x00-\\x7f]|[^\\x00-\\x08\\x0a-\\x1f\\x7f\"\\\\])*)\"/,\n    PARAM = new RegExp(TOKEN.source + '(?:=(?:' + TOKEN.source + '|' + QUOTED.source + '))?'),\n    EXT = new RegExp(TOKEN.source + '(?: *; *' + PARAM.source + ')*', 'g'),\n    EXT_LIST = new RegExp('^' + EXT.source + '(?: *, *' + EXT.source + ')*$'),\n    NUMBER = /^-?(0|[1-9][0-9]*)(\\.[0-9]+)?$/;\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  var Parser = {\n    parseHeader: function (header) {\n      var offers = new Offers();\n      if (header === '' || header === undefined) return offers;\n      if (!EXT_LIST.test(header)) throw new SyntaxError('Invalid Sec-WebSocket-Extensions header: ' + header);\n      var values = header.match(EXT);\n      values.forEach(function (value) {\n        var params = value.match(new RegExp(PARAM.source, 'g')),\n          name = params.shift(),\n          offer = {};\n        params.forEach(function (param) {\n          var args = param.match(PARAM),\n            key = args[1],\n            data;\n          if (args[2] !== undefined) {\n            data = args[2];\n          } else if (args[3] !== undefined) {\n            data = args[3].replace(/\\\\/g, '');\n          } else {\n            data = true;\n          }\n          if (NUMBER.test(data)) data = parseFloat(data);\n          if (hasOwnProperty.call(offer, key)) {\n            offer[key] = [].concat(offer[key]);\n            offer[key].push(data);\n          } else {\n            offer[key] = data;\n          }\n        }, this);\n        offers.push(name, offer);\n      }, this);\n      return offers;\n    },\n    serializeParams: function (name, params) {\n      var values = [];\n      var print = function (key, value) {\n        if (value instanceof Array) {\n          value.forEach(function (v) {\n            print(key, v);\n          });\n        } else if (value === true) {\n          values.push(key);\n        } else if (typeof value === 'number') {\n          values.push(key + '=' + value);\n        } else if (NOTOKEN.test(value)) {\n          values.push(key + '=\"' + value.replace(/\"/g, '\\\\\"') + '\"');\n        } else {\n          values.push(key + '=' + value);\n        }\n      };\n      for (var key in params) print(key, params[key]);\n      return [name].concat(values).join('; ');\n    }\n  };\n  var Offers = function () {\n    this._byName = {};\n    this._inOrder = [];\n  };\n  Offers.prototype.push = function (name, params) {\n    if (!hasOwnProperty.call(this._byName, name)) this._byName[name] = [];\n    this._byName[name].push(params);\n    this._inOrder.push({\n      name: name,\n      params: params\n    });\n  };\n  Offers.prototype.eachOffer = function (callback, context) {\n    var list = this._inOrder;\n    for (var i = 0, n = list.length; i < n; i++) callback.call(context, list[i].name, list[i].params);\n  };\n  Offers.prototype.byName = function (name) {\n    return this._byName[name] || [];\n  };\n  Offers.prototype.toArray = function () {\n    return this._inOrder.slice();\n  };\n  module.exports = Parser;\n});","lineCount":89,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"TOKEN"],[4,11,3,9],[4,14,3,15],[4,52,3,53],[5,4,4,4,"NOTOKEN"],[5,11,4,11],[5,14,4,15],[5,53,4,54],[6,4,5,4,"QUOTED"],[6,10,5,10],[6,13,5,15],[6,66,5,68],[7,4,6,4,"PARAM"],[7,9,6,9],[7,12,6,15],[7,16,6,19,"RegExp"],[7,22,6,25],[7,23,6,26,"TOKEN"],[7,28,6,31],[7,29,6,32,"source"],[7,35,6,38],[7,38,6,41],[7,47,6,50],[7,50,6,53,"TOKEN"],[7,55,6,58],[7,56,6,59,"source"],[7,62,6,65],[7,65,6,68],[7,68,6,71],[7,71,6,74,"QUOTED"],[7,77,6,80],[7,78,6,81,"source"],[7,84,6,87],[7,87,6,90],[7,92,6,95],[7,93,6,96],[8,4,7,4,"EXT"],[8,7,7,7],[8,10,7,15],[8,14,7,19,"RegExp"],[8,20,7,25],[8,21,7,26,"TOKEN"],[8,26,7,31],[8,27,7,32,"source"],[8,33,7,38],[8,36,7,41],[8,46,7,51],[8,49,7,54,"PARAM"],[8,54,7,59],[8,55,7,60,"source"],[8,61,7,66],[8,64,7,69],[8,68,7,73],[8,70,7,75],[8,73,7,78],[8,74,7,79],[9,4,8,4,"EXT_LIST"],[9,12,8,12],[9,15,8,15],[9,19,8,19,"RegExp"],[9,25,8,25],[9,26,8,26],[9,29,8,29],[9,32,8,32,"EXT"],[9,35,8,35],[9,36,8,36,"source"],[9,42,8,42],[9,45,8,45],[9,55,8,55],[9,58,8,58,"EXT"],[9,61,8,61],[9,62,8,62,"source"],[9,68,8,68],[9,71,8,71],[9,76,8,76],[9,77,8,77],[10,4,9,4,"NUMBER"],[10,10,9,10],[10,13,9,15],[10,45,9,47],[11,2,11,0],[11,6,11,4,"hasOwnProperty"],[11,20,11,18],[11,23,11,21,"Object"],[11,29,11,27],[11,30,11,28,"prototype"],[11,39,11,37],[11,40,11,38,"hasOwnProperty"],[11,54,11,52],[12,2,13,0],[12,6,13,4,"Parser"],[12,12,13,10],[12,15,13,13],[13,4,14,2,"parseHeader"],[13,15,14,13],[13,17,14,15],[13,26,14,15,"parseHeader"],[13,27,14,24,"header"],[13,33,14,30],[13,35,14,32],[14,6,15,4],[14,10,15,8,"offers"],[14,16,15,14],[14,19,15,17],[14,23,15,21,"Offers"],[14,29,15,27],[14,30,15,28],[14,31,15,29],[15,6,16,4],[15,10,16,8,"header"],[15,16,16,14],[15,21,16,19],[15,23,16,21],[15,27,16,25,"header"],[15,33,16,31],[15,38,16,36,"undefined"],[15,47,16,45],[15,49,16,47],[15,56,16,54,"offers"],[15,62,16,60],[16,6,18,4],[16,10,18,8],[16,11,18,9,"EXT_LIST"],[16,19,18,17],[16,20,18,18,"test"],[16,24,18,22],[16,25,18,23,"header"],[16,31,18,29],[16,32,18,30],[16,34,19,6],[16,40,19,12],[16,44,19,16,"SyntaxError"],[16,55,19,27],[16,56,19,28],[16,99,19,71],[16,102,19,74,"header"],[16,108,19,80],[16,109,19,81],[17,6,21,4],[17,10,21,8,"values"],[17,16,21,14],[17,19,21,17,"header"],[17,25,21,23],[17,26,21,24,"match"],[17,31,21,29],[17,32,21,30,"EXT"],[17,35,21,33],[17,36,21,34],[18,6,23,4,"values"],[18,12,23,10],[18,13,23,11,"forEach"],[18,20,23,18],[18,21,23,19],[18,31,23,28,"value"],[18,36,23,33],[18,38,23,35],[19,8,24,6],[19,12,24,10,"params"],[19,18,24,16],[19,21,24,19,"value"],[19,26,24,24],[19,27,24,25,"match"],[19,32,24,30],[19,33,24,31],[19,37,24,35,"RegExp"],[19,43,24,41],[19,44,24,42,"PARAM"],[19,49,24,47],[19,50,24,48,"source"],[19,56,24,54],[19,58,24,56],[19,61,24,59],[19,62,24,60],[19,63,24,61],[20,10,25,10,"name"],[20,14,25,14],[20,17,25,19,"params"],[20,23,25,25],[20,24,25,26,"shift"],[20,29,25,31],[20,30,25,32],[20,31,25,33],[21,10,26,10,"offer"],[21,15,26,15],[21,18,26,19],[21,19,26,20],[21,20,26,21],[22,8,28,6,"params"],[22,14,28,12],[22,15,28,13,"forEach"],[22,22,28,20],[22,23,28,21],[22,33,28,30,"param"],[22,38,28,35],[22,40,28,37],[23,10,29,8],[23,14,29,12,"args"],[23,18,29,16],[23,21,29,19,"param"],[23,26,29,24],[23,27,29,25,"match"],[23,32,29,30],[23,33,29,31,"PARAM"],[23,38,29,36],[23,39,29,37],[24,12,29,39,"key"],[24,15,29,42],[24,18,29,45,"args"],[24,22,29,49],[24,23,29,50],[24,24,29,51],[24,25,29,52],[25,12,29,54,"data"],[25,16,29,58],[26,10,31,8],[26,14,31,12,"args"],[26,18,31,16],[26,19,31,17],[26,20,31,18],[26,21,31,19],[26,26,31,24,"undefined"],[26,35,31,33],[26,37,31,35],[27,12,32,10,"data"],[27,16,32,14],[27,19,32,17,"args"],[27,23,32,21],[27,24,32,22],[27,25,32,23],[27,26,32,24],[28,10,33,8],[28,11,33,9],[28,17,33,15],[28,21,33,19,"args"],[28,25,33,23],[28,26,33,24],[28,27,33,25],[28,28,33,26],[28,33,33,31,"undefined"],[28,42,33,40],[28,44,33,42],[29,12,34,10,"data"],[29,16,34,14],[29,19,34,17,"args"],[29,23,34,21],[29,24,34,22],[29,25,34,23],[29,26,34,24],[29,27,34,25,"replace"],[29,34,34,32],[29,35,34,33],[29,40,34,38],[29,42,34,40],[29,44,34,42],[29,45,34,43],[30,10,35,8],[30,11,35,9],[30,17,35,15],[31,12,36,10,"data"],[31,16,36,14],[31,19,36,17],[31,23,36,21],[32,10,37,8],[33,10,38,8],[33,14,38,12,"NUMBER"],[33,20,38,18],[33,21,38,19,"test"],[33,25,38,23],[33,26,38,24,"data"],[33,30,38,28],[33,31,38,29],[33,33,38,31,"data"],[33,37,38,35],[33,40,38,38,"parseFloat"],[33,50,38,48],[33,51,38,49,"data"],[33,55,38,53],[33,56,38,54],[34,10,40,8],[34,14,40,12,"hasOwnProperty"],[34,28,40,26],[34,29,40,27,"call"],[34,33,40,31],[34,34,40,32,"offer"],[34,39,40,37],[34,41,40,39,"key"],[34,44,40,42],[34,45,40,43],[34,47,40,45],[35,12,41,10,"offer"],[35,17,41,15],[35,18,41,16,"key"],[35,21,41,19],[35,22,41,20],[35,25,41,23],[35,27,41,25],[35,28,41,26,"concat"],[35,34,41,32],[35,35,41,33,"offer"],[35,40,41,38],[35,41,41,39,"key"],[35,44,41,42],[35,45,41,43],[35,46,41,44],[36,12,42,10,"offer"],[36,17,42,15],[36,18,42,16,"key"],[36,21,42,19],[36,22,42,20],[36,23,42,21,"push"],[36,27,42,25],[36,28,42,26,"data"],[36,32,42,30],[36,33,42,31],[37,10,43,8],[37,11,43,9],[37,17,43,15],[38,12,44,10,"offer"],[38,17,44,15],[38,18,44,16,"key"],[38,21,44,19],[38,22,44,20],[38,25,44,23,"data"],[38,29,44,27],[39,10,45,8],[40,8,46,6],[40,9,46,7],[40,11,46,9],[40,15,46,13],[40,16,46,14],[41,8,47,6,"offers"],[41,14,47,12],[41,15,47,13,"push"],[41,19,47,17],[41,20,47,18,"name"],[41,24,47,22],[41,26,47,24,"offer"],[41,31,47,29],[41,32,47,30],[42,6,48,4],[42,7,48,5],[42,9,48,7],[42,13,48,11],[42,14,48,12],[43,6,50,4],[43,13,50,11,"offers"],[43,19,50,17],[44,4,51,2],[44,5,51,3],[45,4,53,2,"serializeParams"],[45,19,53,17],[45,21,53,19],[45,30,53,19,"serializeParams"],[45,31,53,28,"name"],[45,35,53,32],[45,37,53,34,"params"],[45,43,53,40],[45,45,53,42],[46,6,54,4],[46,10,54,8,"values"],[46,16,54,14],[46,19,54,17],[46,21,54,19],[47,6,56,4],[47,10,56,8,"print"],[47,15,56,13],[47,18,56,16],[47,27,56,16,"print"],[47,28,56,25,"key"],[47,31,56,28],[47,33,56,30,"value"],[47,38,56,35],[47,40,56,37],[48,8,57,6],[48,12,57,10,"value"],[48,17,57,15],[48,29,57,27,"Array"],[48,34,57,32],[48,36,57,34],[49,10,58,8,"value"],[49,15,58,13],[49,16,58,14,"forEach"],[49,23,58,21],[49,24,58,22],[49,34,58,31,"v"],[49,35,58,32],[49,37,58,34],[50,12,58,36,"print"],[50,17,58,41],[50,18,58,42,"key"],[50,21,58,45],[50,23,58,47,"v"],[50,24,58,48],[50,25,58,49],[51,10,58,50],[51,11,58,51],[51,12,58,52],[52,8,59,6],[52,9,59,7],[52,15,59,13],[52,19,59,17,"value"],[52,24,59,22],[52,29,59,27],[52,33,59,31],[52,35,59,33],[53,10,60,8,"values"],[53,16,60,14],[53,17,60,15,"push"],[53,21,60,19],[53,22,60,20,"key"],[53,25,60,23],[53,26,60,24],[54,8,61,6],[54,9,61,7],[54,15,61,13],[54,19,61,17],[54,26,61,24,"value"],[54,31,61,29],[54,36,61,34],[54,44,61,42],[54,46,61,44],[55,10,62,8,"values"],[55,16,62,14],[55,17,62,15,"push"],[55,21,62,19],[55,22,62,20,"key"],[55,25,62,23],[55,28,62,26],[55,31,62,29],[55,34,62,32,"value"],[55,39,62,37],[55,40,62,38],[56,8,63,6],[56,9,63,7],[56,15,63,13],[56,19,63,17,"NOTOKEN"],[56,26,63,24],[56,27,63,25,"test"],[56,31,63,29],[56,32,63,30,"value"],[56,37,63,35],[56,38,63,36],[56,40,63,38],[57,10,64,8,"values"],[57,16,64,14],[57,17,64,15,"push"],[57,21,64,19],[57,22,64,20,"key"],[57,25,64,23],[57,28,64,26],[57,32,64,30],[57,35,64,33,"value"],[57,40,64,38],[57,41,64,39,"replace"],[57,48,64,46],[57,49,64,47],[57,53,64,51],[57,55,64,53],[57,60,64,58],[57,61,64,59],[57,64,64,62],[57,67,64,65],[57,68,64,66],[58,8,65,6],[58,9,65,7],[58,15,65,13],[59,10,66,8,"values"],[59,16,66,14],[59,17,66,15,"push"],[59,21,66,19],[59,22,66,20,"key"],[59,25,66,23],[59,28,66,26],[59,31,66,29],[59,34,66,32,"value"],[59,39,66,37],[59,40,66,38],[60,8,67,6],[61,6,68,4],[61,7,68,5],[62,6,70,4],[62,11,70,9],[62,15,70,13,"key"],[62,18,70,16],[62,22,70,20,"params"],[62,28,70,26],[62,30,70,28,"print"],[62,35,70,33],[62,36,70,34,"key"],[62,39,70,37],[62,41,70,39,"params"],[62,47,70,45],[62,48,70,46,"key"],[62,51,70,49],[62,52,70,50],[62,53,70,51],[63,6,72,4],[63,13,72,11],[63,14,72,12,"name"],[63,18,72,16],[63,19,72,17],[63,20,72,18,"concat"],[63,26,72,24],[63,27,72,25,"values"],[63,33,72,31],[63,34,72,32],[63,35,72,33,"join"],[63,39,72,37],[63,40,72,38],[63,44,72,42],[63,45,72,43],[64,4,73,2],[65,2,74,0],[65,3,74,1],[66,2,76,0],[66,6,76,4,"Offers"],[66,12,76,10],[66,15,76,13],[66,24,76,13,"Offers"],[66,25,76,13],[66,27,76,24],[67,4,77,2],[67,8,77,6],[67,9,77,7,"_byName"],[67,16,77,14],[67,19,77,18],[67,20,77,19],[67,21,77,20],[68,4,78,2],[68,8,78,6],[68,9,78,7,"_inOrder"],[68,17,78,15],[68,20,78,18],[68,22,78,20],[69,2,79,0],[69,3,79,1],[70,2,81,0,"Offers"],[70,8,81,6],[70,9,81,7,"prototype"],[70,18,81,16],[70,19,81,17,"push"],[70,23,81,21],[70,26,81,24],[70,36,81,33,"name"],[70,40,81,37],[70,42,81,39,"params"],[70,48,81,45],[70,50,81,47],[71,4,82,2],[71,8,82,6],[71,9,82,7,"hasOwnProperty"],[71,23,82,21],[71,24,82,22,"call"],[71,28,82,26],[71,29,82,27],[71,33,82,31],[71,34,82,32,"_byName"],[71,41,82,39],[71,43,82,41,"name"],[71,47,82,45],[71,48,82,46],[71,50,83,4],[71,54,83,8],[71,55,83,9,"_byName"],[71,62,83,16],[71,63,83,17,"name"],[71,67,83,21],[71,68,83,22],[71,71,83,25],[71,73,83,27],[72,4,85,2],[72,8,85,6],[72,9,85,7,"_byName"],[72,16,85,14],[72,17,85,15,"name"],[72,21,85,19],[72,22,85,20],[72,23,85,21,"push"],[72,27,85,25],[72,28,85,26,"params"],[72,34,85,32],[72,35,85,33],[73,4,86,2],[73,8,86,6],[73,9,86,7,"_inOrder"],[73,17,86,15],[73,18,86,16,"push"],[73,22,86,20],[73,23,86,21],[74,6,86,23,"name"],[74,10,86,27],[74,12,86,29,"name"],[74,16,86,33],[75,6,86,35,"params"],[75,12,86,41],[75,14,86,43,"params"],[76,4,86,50],[76,5,86,51],[76,6,86,52],[77,2,87,0],[77,3,87,1],[78,2,89,0,"Offers"],[78,8,89,6],[78,9,89,7,"prototype"],[78,18,89,16],[78,19,89,17,"eachOffer"],[78,28,89,26],[78,31,89,29],[78,41,89,38,"callback"],[78,49,89,46],[78,51,89,48,"context"],[78,58,89,55],[78,60,89,57],[79,4,90,2],[79,8,90,6,"list"],[79,12,90,10],[79,15,90,13],[79,19,90,17],[79,20,90,18,"_inOrder"],[79,28,90,26],[80,4,91,2],[80,9,91,7],[80,13,91,11,"i"],[80,14,91,12],[80,17,91,15],[80,18,91,16],[80,20,91,18,"n"],[80,21,91,19],[80,24,91,22,"list"],[80,28,91,26],[80,29,91,27,"length"],[80,35,91,33],[80,37,91,35,"i"],[80,38,91,36],[80,41,91,39,"n"],[80,42,91,40],[80,44,91,42,"i"],[80,45,91,43],[80,47,91,45],[80,49,92,4,"callback"],[80,57,92,12],[80,58,92,13,"call"],[80,62,92,17],[80,63,92,18,"context"],[80,70,92,25],[80,72,92,27,"list"],[80,76,92,31],[80,77,92,32,"i"],[80,78,92,33],[80,79,92,34],[80,80,92,35,"name"],[80,84,92,39],[80,86,92,41,"list"],[80,90,92,45],[80,91,92,46,"i"],[80,92,92,47],[80,93,92,48],[80,94,92,49,"params"],[80,100,92,55],[80,101,92,56],[81,2,93,0],[81,3,93,1],[82,2,95,0,"Offers"],[82,8,95,6],[82,9,95,7,"prototype"],[82,18,95,16],[82,19,95,17,"byName"],[82,25,95,23],[82,28,95,26],[82,38,95,35,"name"],[82,42,95,39],[82,44,95,41],[83,4,96,2],[83,11,96,9],[83,15,96,13],[83,16,96,14,"_byName"],[83,23,96,21],[83,24,96,22,"name"],[83,28,96,26],[83,29,96,27],[83,33,96,31],[83,35,96,33],[84,2,97,0],[84,3,97,1],[85,2,99,0,"Offers"],[85,8,99,6],[85,9,99,7,"prototype"],[85,18,99,16],[85,19,99,17,"toArray"],[85,26,99,24],[85,29,99,27],[85,41,99,38],[86,4,100,2],[86,11,100,9],[86,15,100,13],[86,16,100,14,"_inOrder"],[86,24,100,22],[86,25,100,23,"slice"],[86,30,100,28],[86,31,100,29],[86,32,100,30],[87,2,101,0],[87,3,101,1],[88,2,103,0,"module"],[88,8,103,6],[88,9,103,7,"exports"],[88,16,103,14],[88,19,103,17,"Parser"],[88,25,103,23],[89,0,103,24],[89,3]],"functionMap":{"names":["<global>","Parser.parseHeader","values.forEach$argument_0","params.forEach$argument_0","Parser.serializeParams","print","value.forEach$argument_0","Offers","Offers.prototype.push","Offers.prototype.eachOffer","Offers.prototype.byName","Offers.prototype.toArray"],"mappings":"AAA;eCa;mBCS;qBCK;ODkB;KDE;GDG;mBIE;gBCG;sBCE,6BD;KDU;GJK;aOG;CPG;wBQE;CRM;6BSE;CTI;0BUE;CVE;2BWE;CXE"},"hasCjsExports":true},"type":"js/module"}]}